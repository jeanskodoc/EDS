<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche de Préparation de Cours - Éditeur Enrichi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Bibliothèque pour l'export PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- Bibliothèque pour l'export Word -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.8.2/docx.js"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #27ae60;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2, h3 {
            color: var(--secondary-color);
            margin-bottom: 20px;
        }
        
        h1 {
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--light-color);
            border-radius: 8px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--dark-color);
        }
        
        input[type="text"], 
        input[type="number"], 
        input[type="date"],
        textarea, 
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: var(--primary-color);
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .btn {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn-danger {
            background: var(--accent-color);
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-success {
            background: var(--success-color);
        }
        
        .btn-success:hover {
            background: #219653;
        }
        
        .btn-warning {
            background: #f39c12;
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-info {
            background: #17a2b8;
        }
        
        .btn-info:hover {
            background: #138496;
        }
        
        .rich-text-editor {
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .toolbar {
            background-color: #f5f5f5;
            padding: 5px;
            border-bottom: 1px solid #ddd;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .toolbar button {
            background-color: white;
            color: #333;
            border: 1px solid #ddd;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 14px;
            margin: 0;
            cursor: pointer;
        }
        
        .toolbar button:hover {
            background-color: #f0f0f0;
        }
        
        .editor-content {
            min-height: 100px;
            padding: 10px;
            outline: none;
        }
        
        .editor-content:focus {
            border-color: #3498db;
        }
        
        .color-picker {
            position: relative;
            display: inline-block;
        }
        
        .color-button {
            background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid #ccc;
            cursor: pointer;
        }
        
        .color-palette {
            display: none;
            position: absolute;
            top: 35px;
            left: 0;
            background: white;
            border: 1px solid #ddd;
            padding: 5px;
            z-index: 1000;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            width: 150px;
        }
        
        .color-option {
            width: 20px;
            height: 20px;
            display: inline-block;
            margin: 2px;
            cursor: pointer;
            border: 1px solid #ddd;
        }
        
        .toolbar .divider {
            width: 1px;
            background-color: #ddd;
            height: 25px;
            margin: 0 5px;
            display: inline-block;
        }
        
        .math-preview {
            padding: 10px;
            background: #f8f9fa;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 3px solid #3498db;
            min-height: 50px;
        }
        
        .media-preview {
            margin: 10px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .media-preview img, .media-preview video, .media-preview audio {
            max-width: 300px;
            max-height: 200px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .media-preview audio {
            width: 100%;
            max-width: 400px;
        }
        
        .small-textarea {
            min-height: 60px;
            font-size: 14px;
        }
        
        .editor-toggle {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 5px;
        }
        
        .editor-toggle-btn {
            font-size: 12px;
            padding: 3px 8px;
            background-color: #f0f0f0;
            color: #555;
            border: 1px solid #ddd;
            cursor: pointer;
        }
        
        .editor-toggle-btn.active {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            background-color: #2ecc71;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 2000;
        }
        
        .notification.error {
            background-color: #e74c3c;
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .latex-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .latex-modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            width: 500px;
            max-width: 90%;
        }
        
        .latex-modal h3 {
            margin-top: 0;
            color: var(--secondary-color);
        }
        
        .latex-input {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            margin-bottom: 15px;
        }
        
        .latex-preview {
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 4px;
            min-height: 50px;
            margin-bottom: 15px;
        }
        
        .latex-modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .cursor-position {
            font-size: 12px;
            color: #777;
            margin-top: 5px;
        }
        
        .saved-lessons {
            margin-top: 40px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .search-filter {
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            align-items: end;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-group label {
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        .lesson-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .lesson-item {
            background-color: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }
        
        .lesson-item:hover {
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .lesson-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .lesson-date {
            font-size: 0.8em;
            color: #7f8c8d;
        }
        
        .lesson-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85em;
            color: #555;
            margin-bottom: 10px;
        }
        
        .lesson-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .lesson-summary {
            color: #333;
            line-height: 1.5;
        }
        
        .lesson-actions {
            margin-top: 15px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .no-lessons {
            text-align: center;
            padding: 30px;
            color: #7f8c8d;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: #3498db;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .stats span {
            background-color: #e8f4fc;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .file-input {
            display: none;
        }
        
        .situation-probleme {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .tableau-activites {
            margin: 20px 0;
        }
        
        .tableau-activites h3 {
            margin-bottom: 10px;
        }
        
        .exercice-maison {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .recapitulation {
            background-color: #e8f6ef;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .export-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            
            body, .container {
                padding: 0;
                margin: 0;
                background: white;
                box-shadow: none;
            }
            
            .section {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            h1, h2, h3 {
                page-break-after: avoid;
                break-after: avoid;
            }
            
            table {
                page-break-inside: auto;
                break-inside: auto;
            }
            
            tr {
                page-break-inside: avoid;
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fiche de Préparation de Séance Pédagogique</h1>
        
        <!-- Boutons d'action principaux -->
        <div class="form-group no-print">
            <button class="btn btn-success" onclick="saveForm()"><i class="fas fa-save"></i> Sauvegarder</button>
            <button class="btn" onclick="exportJSON()"><i class="fas fa-file-export"></i> Exporter JSON</button>
            <button class="btn btn-warning" onclick="importJSON()"><i class="fas fa-file-import"></i> Importer JSON</button>
            <button class="btn btn-danger" onclick="clearForm()"><i class="fas fa-trash"></i> Effacer tout</button>
            <input type="file" id="jsonFileInput" class="file-input" accept=".json">
        </div>
        
        <!-- Boutons d'exportation -->
        <div class="export-buttons no-print">
            <button class="btn btn-info" onclick="exportToPDF()"><i class="fas fa-file-pdf"></i> Exporter PDF</button>
            <button class="btn btn-info" onclick="exportToWord()"><i class="fas fa-file-word"></i> Exporter Word</button>
            <button class="btn" onclick="window.print()"><i class="fas fa-print"></i> Imprimer</button>
        </div>
        
        <!-- FICHE 1 - Informations générales -->
        <div class="section">
            <h2>Fiche 1 - Informations Générales</h2>
            
            <div class="form-group">
                <label for="date_cours">Date du cours:</label>
                <input type="date" id="date_cours" name="date_cours">
            </div>
            
            <div class="form-group">
                <label for="annee_scolaire">Année scolaire:</label>
                <input type="text" id="annee_scolaire" name="annee_scolaire" placeholder="Ex: 2023-2024">
            </div>
            
            <div class="form-group">
                <label for="enseignant">Nom de l'enseignant:</label>
                <input type="text" id="enseignant" name="enseignant" value="BADIANG JEAN JULES">
            </div>
            
            <div class="form-group">
                <label for="etablissement">Établissement:</label>
                <input type="text" id="etablissement" name="etablissement" value="LYCEE TECHNIQUE CHARLES ATANGANA">
            </div>
            
            <div class="form-group">
                <label for="module">Module/Discipline:</label>
                <input type="text" id="module" name="module" value="DEVIS">
            </div>
            
            <div class="form-group">
                <label for="classe">Classe:</label>
                <input type="text" id="classe" name="classe" value="3° DEBA">
            </div>
            
            <div class="form-group">
                <label for="effectif">Effectif:</label>
                <input type="number" id="effectif" name="effectif" value="28">
            </div>
            
            <div class="form-group">
                <label for="titre">Titre de la leçon:</label>
                <input type="text" id="titre" name="titre" value="ETUDE DES FIGURES GÉOMÉTRIQUES">
            </div>
            
            <div class="form-group">
                <label for="competence">Énoncé de la compétence/Objectif général:</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="competence">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="competence-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <button type="button" data-command="insertUnorderedList"><i class="fas fa-list-ul"></i></button>
                        <button type="button" data-command="insertOrderedList"><i class="fas fa-list-ol"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="competence-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('competence-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="competence-content" contenteditable="true" onkeyup="updateCursorPosition('competence-content')" onclick="updateCursorPosition('competence-content')">Calculer les surfaces et volumes des ouvrages</div>
                    <div class="cursor-position" id="competence-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="competence" name="competence" style="display:none;">Calculer les surfaces et volumes des ouvrages</textarea>
            </div>
            
            <div class="form-group">
                <label for="objectifs">Objectifs spécifiques de la séance/Objectifs opérationnels:</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="objectifs">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="objectifs-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <button type="button" data-command="insertUnorderedList"><i class="fas fa-list-ul"></i></button>
                        <button type="button" data-command="insertOrderedList"><i class="fas fa-list-ol"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="objectifs-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('objectifs-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="objectifs-content" contenteditable="true" onkeyup="updateCursorPosition('objectifs-content')" onclick="updateCursorPosition('objectifs-content')">- Énoncer les formules des surfaces et volumes des figures usuelles<br>- Calculer les surfaces et volumes des figures simples</div>
                    <div class="cursor-position" id="objectifs-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="objectifs" name="objectifs" style="display:none;">- Énoncer les formules des surfaces et volumes des figures usuelles
- Calculer les surfaces et volumes des figures simples</textarea>
            </div>
            
            <div class="form-group">
                <label for="duree_competence">Durée de la compétence:</label>
                <input type="text" id="duree_competence" name="duree_competence" value="4H">
            </div>
            
            <div class="form-group">
                <label for="duree_seance">Durée de la séance:</label>
                <input type="text" id="duree_seance" name="duree_seance" value="2 heures">
            </div>
            
            <div class="form-group">
                <label for="prerequis">Connaissances préalables (prérequis):</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="prerequis">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="prerequis-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="prerequis-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('prerequis-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="prerequis-content" contenteditable="true" onkeyup="updateCursorPosition('prerequis-content')" onclick="updateCursorPosition('prerequis-content')">- Connaissances en mathématiques : multiplication, division, racines carrées.</div>
                    <div class="cursor-position" id="prerequis-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="prerequis" name="prerequis" style="display:none;">- Connaissances en mathématiques : multiplication, division, racines carrées.</textarea>
            </div>
            
            <div class="form-group">
                <label for="lexique">Vocabulaire nouveau (lexique):</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="lexique">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="lexique-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="lexique-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('lexique-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="lexique-content" contenteditable="true" onkeyup="updateCursorPosition('lexique-content')" onclick="updateCursorPosition('lexique-content')">Pyramide, prisme, polygone, cône.</div>
                    <div class="cursor-position" id="lexique-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="lexique" name="lexique" style="display:none;">Pyramide, prisme, polygone, cône.</textarea>
            </div>
            
            <div class="form-group">
                <label for="references">Références bibliographiques:</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="references">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="references-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="references-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('references-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="references-content" contenteditable="true" onkeyup="updateCursorPosition('references-content')" onclick="updateCursorPosition('references-content')">Guide de calcul professionnel (Thomas Mba) ; Établissement des devis quantitatifs et estimatifs des lots gros et second œuvre (Belkhattaf Abdelouahid)</div>
                    <div class="cursor-position" id="references-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="references" name="references" style="display:none;">Guide de calcul professionnel (Thomas Mba) ; Établissement des devis quantitatifs et estimatifs des lots gros et second œuvre (Belkhattaf Abdelouahid)</textarea>
            </div>
            
            <div class="form-group">
                <label for="media1">Importer image, audio ou vidéo:</label>
                <input type="file" id="media1" name="media1" accept="image/*,video/*,audio/*" onchange="previewMedia(this, 'mediaPreview1')">
                <div class="media-preview" id="mediaPreview1"></div>
            </div>
        </div>
        
        <!-- Situation problème -->
        <div class="section situation-probleme">
            <h2>Situation Problème</h2>
            
            <div class="form-group">
                <label for="situation_enonce">Énoncé de la situation problème:</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="situation_enonce">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="situation_enonce-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="situation_enonce-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('situation_enonce-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="situation_enonce-content" contenteditable="true" onkeyup="updateCursorPosition('situation_enonce-content')" onclick="updateCursorPosition('situation_enonce-content')">Un client souhaite construire une piscine de forme rectangulaire de 8m de longueur, 4m de largeur et 1,5m de profondeur. Comment calculer le volume de béton nécessaire pour réaliser cette piscine?</div>
                    <div class="cursor-position" id="situation_enonce-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="situation_enonce" name="situation_enonce" style="display:none;">Un client souhaite construire une piscine de forme rectangulaire de 8m de longueur, 4m de largeur et 1,5m de profondeur. Comment calculer le volume de béton nécessaire pour réaliser cette piscine?</textarea>
            </div>
            
            <div class="form-group">
                <label for="situation_solutions">Proposition de solutions:</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="situation_solutions">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="situation_solutions-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="situation_solutions-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('situation_solutions-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="situation_solutions-content" contenteditable="true" onkeyup="updateCursorPosition('situation_solutions-content')" onclick="updateCursorPosition('situation_solutions-content')">- Calculer le volume de la piscine: V = Longueur × Largeur × Profondeur<br>- Appliquer la formule: V = 8m × 4m × 1,5m = 48 m³</div>
                    <div class="cursor-position" id="situation_solutions-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="situation_solutions" name="situation_solutions" style="display:none;">- Calculer le volume de la piscine: V = Longueur × Largeur × Profondeur
- Appliquer la formule: V = 8m × 4m × 1,5m = 48 m³</textarea>
            </div>
        </div>
        
        <!-- Tableau des activités -->
        <div class="section tableau-activites">
            <h2>Tableau des Activités</h2>
            
            <h3>Activités de l'Enseignant</h3>
            <div class="form-group">
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="activites_enseignant">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="activites_enseignant-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="activites_enseignant-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('activites_enseignant-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="activites_enseignant-content" contenteditable="true" onkeyup="updateCursorPosition('activites_enseignant-content')" onclick="updateCursorPosition('activites_enseignant-content')">- Présenter les différentes figures géométriques<br>- Expliquer les formules de calcul de surface et volume<br>- Guider les élèves dans la résolution d'exercices</div>
                    <div class="cursor-position" id="activites_enseignant-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="activites_enseignant" name="activites_enseignant" style="display:none;">- Présenter les différentes figures géométriques
- Expliquer les formules de calcul de surface et volume
- Guider les élèves dans la résolution d'exercices</textarea>
            </div>
            
            <h3>Activités des Élèves</h3>
            <div class="form-group">
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="activites_eleves">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="activites_eleves-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="activites_eleves-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('activites_eleves-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="activites_eleves-content" contenteditable="true" onkeyup="updateCursorPosition('activites_eleves-content')" onclick="updateCursorPosition('activites_eleves-content')">- Identifier les différentes figures géométriques présentées<br>- Appliquer les formules pour résoudre les exercices proposés<br>- Participer activement aux discussions de groupe</div>
                    <div class="cursor-position" id="activites_eleves-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="activites_eleves" name="activites_eleves" style="display:none;">- Identifier les différentes figures géométriques présentées
- Appliquer les formules pour résoudre les exercices proposés
- Participer activement aux discussions de groupe</textarea>
            </div>
        </div>
        
        <!-- FICHE 2 - Déroulement de la séance -->
        <div class="section">
            <h2>Fiche 2 - Déroulement de la Séance</h2>
            
            <table id="deroulement-table">
                <thead>
                    <tr>
                        <th>Etapes</th>
                        <th>Phases</th>
                        <th>Éléments de Contenu</th>
                        <th>Méthodes pédagogiques</th>
                        <th>Activités pédagogiques</th>
                        <th>Indicateurs d'évaluation</th>
                        <th>Durée</th>
                        <th>Matériel didactique</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" value="Introduction"></td>
                        <td><input type="text" value="Exploration"></td>
                        <td><input type="text" value="Généralités"></td>
                        <td><input type="text" value="-Méthode interrogative"></td>
                        <td>
                            <div class="editor-toggle">
                                <button class="editor-toggle-btn" data-target="activite1">Basculer Éditeur</button>
                            </div>
                            <div class="rich-text-editor" id="activite1-editor">
                                <div class="toolbar">
                                    <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                                    <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                                    <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                                    <button type="button" onclick="openLatexModal('activite1-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                                </div>
                                <div class="editor-content" id="activite1-content" contenteditable="true" onkeyup="updateCursorPosition('activite1-content')" onclick="updateCursorPosition('activite1-content')">-Poser les questions permettant de découvrir le titre de la leçon -Présenter la compétence attendue</div>
                                <div class="cursor-position" id="activite1-cursor-position">Position du curseur: 0</div>
                            </div>
                            <textarea id="activite1" name="activite1" style="display:none;">-Poser les questions permettant de découvrir le titre de la leçon -Présenter la compétence attendue</textarea>
                        </td>
                        <td><input type="text" value="Réponse correcte aux questions."></td>
                        <td><input type="text" value="10min"></td>
                        <td><input type="text" value=""></td>
                        <td><button class="btn-danger" onclick="removeRow(this)">X</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="Conduite de la leçon"></td>
                        <td><input type="text" value="Apprentissage de base"></td>
                        <td>
                            <div class="editor-toggle">
                                <button class="editor-toggle-btn" data-target="contenu1">Basculer Éditeur</button>
                            </div>
                            <div class="rich-text-editor" id="contenu1-editor">
                                <div class="toolbar">
                                    <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                                    <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                                    <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                                    <button type="button" onclick="openLatexModal('contenu1-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                                </div>
                                <div class="editor-content" id="contenu1-content" contenteditable="true" onkeyup="updateCursorPosition('contenu1-content')" onclick="updateCursorPosition('contenu1-content')">I-Mesure des distances II- Mesures des surfaces III- Mesure des volumes</div>
                                <div class="cursor-position" id="contenu1-cursor-position">Position du curseur: 0</div>
                            </div>
                            <textarea id="contenu1" name="contenu1" style="display:none;">I-Mesure des distances II- Mesures des surfaces III- Mesure des volumes</textarea>
                        </td>
                        <td><input type="text" value="-Méthode active -Méthode interactive"></td>
                        <td>
                            <div class="editor-toggle">
                                <button class="editor-toggle-btn" data-target="activite2">Basculer Éditeur</button>
                            </div>
                            <div class="rich-text-editor" id="activite2-editor">
                                <div class="toolbar">
                                    <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                                    <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                                    <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                                    <button type="button" onclick="openLatexModal('activite2-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                                </div>
                                <div class="editor-content" id="activite2-content" contenteditable="true" onkeyup="updateCursorPosition('activite2-content')" onclick="updateCursorPosition('activite2-content')">-Exposé magistral</div>
                                <div class="cursor-position" id="activite2-cursor-position">Position du curseur: 0</div>
                            </div>
                            <textarea id="activite2" name="activite2" style="display:none;">-Exposé magistral</textarea>
                        </td>
                        <td><input type="text" value=""></td>
                        <td><input type="text" value="1h20min"></td>
                        <td><input type="text" value="-tableau ; -coule -règle et équerre"></td>
                        <td><button class="btn-danger" onclick="removeRow(this)">X</button></td>
                    </tr>
                </tbody>
            </table>
            
            <button class="btn" onclick="addRow()">Ajouter une ligne</button>
            
            <div class="form-group">
                <label for="methode_conseillee">Méthode conseillée:</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="methode_conseillee">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="methode_conseillee-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="methode_conseillee-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('methode_conseillee-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="methode_conseillee-content" contenteditable="true" onkeyup="updateCursorPosition('methode_conseillee-content')" onclick="updateCursorPosition('methode_conseillee-content')">Méthode active et participative, avec démonstrations pratiques et exercices d'application.</div>
                    <div class="cursor-position" id="methode_conseillee-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="methode_conseillee" name="methode_conseillee" style="display:none;">Méthode active et participative, avec démonstrations pratiques et exercices d'application.</textarea>
            </div>
            
            <div class="form-group">
                <label for="media2">Importer image, audio ou vidéo:</label>
                <input type="file" id="media2" name="media2" accept="image/*,video/*,audio/*" onchange="previewMedia(this, 'mediaPreview2')">
                <div class="media-preview" id="mediaPreview2"></div>
            </div>
        </div>
        
        <!-- FICHE 3 - Suite du déroulement -->
        <div class="section">
            <h2>Fiche 3 - Suite du Déroulement</h2>
            
            <table id="suite-table">
                <thead>
                    <tr>
                        <th>Étapes</th>
                        <th>Phases</th>
                        <th>Éléments de Contenu</th>
                        <th>Méthodes pédagogiques</th>
                        <th>Activités pédagogiques</th>
                        <th>Indicateurs d'évaluation</th>
                        <th>Durée</th>
                        <th>Matériel didactique</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" value="Transient"></td>
                        <td><input type="text" value="Exercice d'application"></td>
                        <td><input type="text" value=""></td>
                        <td><input type="text" value="-Méthode active"></td>
                        <td>
                            <div class="editor-toggle">
                                <button class="editor-toggle-btn" data-target="activite3">Basculer Éditeur</button>
                            </div>
                            <div class="rich-text-editor" id="activite3-editor">
                                <div class="toolbar">
                                    <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                                    <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                                    <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                                    <button type="button" onclick="openLatexModal('activite3-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                                </div>
                                <div class="editor-content" id="activite3-content" contenteditable="true" onkeyup="updateCursorPosition('activite3-content')" onclick="updateCursorPosition('activite3-content')">Corrige l'exercice</div>
                                <div class="cursor-position" id="activite3-cursor-position">Position du curseur: 0</div>
                            </div>
                            <textarea id="activite3" name="activite3" style="display:none;">Corrige l'exercice</textarea>
                        </td>
                        <td><input type="text" value=""></td>
                        <td><input type="text" value="15min"></td>
                        <td><input type="text" value="-tableau ; -crole -règle et équerre"></td>
                        <td><button class="btn-danger" onclick="removeRow(this)">X</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="Clôture"></td>
                        <td><input type="text" value="Enrichissement"></td>
                        <td><input type="text" value="Exercice de consolidation"></td>
                        <td><input type="text" value="-Méthode interrogative -Méthode active."></td>
                        <td>
                            <div class="editor-toggle">
                                <button class="editor-toggle-btn" data-target="activite4">Basculer Éditeur</button>
                            </div>
                            <div class="rich-text-editor" id="activite4-editor">
                                <div class="toolbar">
                                    <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                                    <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                                    <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                                    <button type="button" onclick="openLatexModal('activite4-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                                </div>
                                <div class="editor-content" id="activite4-content" contenteditable="true" onkeyup="updateCursorPosition('activite4-content')" onclick="updateCursorPosition('activite4-content')">Récapituler les points clés de la leçon, établir le lien avec la prochaine compétence</div>
                                <div class="cursor-position" id="activite4-cursor-position">Position du curseur: 0</div>
                            </div>
                            <textarea id="activite4" name="activite4" style="display:none;">Récapituler les points clés de la leçon, établir le lien avec la prochaine compétence</textarea>
                        </td>
                        <td><input type="text" value=""></td>
                        <td><input type="text" value="5min"></td>
                        <td><input type="text" value=""></td>
                        <td><button class="btn-danger" onclick="removeRow(this)">X</button></td>
                    </tr>
                </tbody>
            </table>
            
            <button class="btn" onclick="addRow2()">Ajouter une ligne</button>
            
            <!-- Exercices de maison -->
            <div class="exercice-maison">
                <h2>Exercices de Maison</h2>
                
                <div class="form-group">
                    <label for="exercice_enonce">Énoncé des exercices:</label>
                    <div class="editor-toggle">
                        <button class="editor-toggle-btn" data-target="exercice_enonce">Basculer Éditeur</button>
                    </div>
                    <div class="rich-text-editor" id="exercice_enonce-editor">
                        <div class="toolbar">
                            <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                            <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                            <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                            <span class="divider"></span>
                            <div class="color-picker">
                                <button type="button" class="color-button" data-command="foreColor"></button>
                                <div class="color-palette" id="exercice_enonce-color-palette"></div>
                            </div>
                            <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                            <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                            <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                            <button type="button" onclick="openLatexModal('exercice_enonce-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                        </div>
                        <div class="editor-content" id="exercice_enonce-content" contenteditable="true" onkeyup="updateCursorPosition('exercice_enonce-content')" onclick="updateCursorPosition('exercice_enonce-content')">1. Calculer la surface d'un rectangle de 12m de longueur et 8m de largeur.<br>2. Calculer le volume d'un cube dont l'arête mesure 5m.<br>3. Un cylindre a un rayon de 3m et une hauteur de 7m. Calculer son volume.</div>
                        <div class="cursor-position" id="exercice_enonce-cursor-position">Position du curseur: 0</div>
                    </div>
                    <textarea id="exercice_enonce" name="exercice_enonce" style="display:none;">1. Calculer la surface d'un rectangle de 12m de longueur et 8m de largeur.
2. Calculer le volume d'un cube dont l'arête mesure 5m.
3. Un cylindre a un rayon de 3m et une hauteur de 7m. Calculer son volume.</textarea>
                </div>
                
                <div class="form-group">
                    <label for="exercice_date_correction">Date de correction:</label>
                    <input type="date" id="exercice_date_correction" name="exercice_date_correction">
                </div>
            </div>
            
            <!-- Récapitulation de la leçon -->
            <div class="recapitulation">
                <h2>Récapitulation de la Leçon</h2>
                
                <div class="form-group">
                    <label for="recapitulation">Éléments à retenir:</label>
                    <div class="editor-toggle">
                        <button class="editor-toggle-btn" data-target="recapitulation">Basculer Éditeur</button>
                    </div>
                    <div class="rich-text-editor" id="recapitulation-editor">
                        <div class="toolbar">
                            <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                            <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                            <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                            <span class="divider"></span>
                            <div class="color-picker">
                                <button type="button" class="color-button" data-command="foreColor"></button>
                                <div class="color-palette" id="recapitulation-color-palette"></div>
                            </div>
                            <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                            <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                            <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                            <button type="button" onclick="openLatexModal('recapitulation-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                        </div>
                        <div class="editor-content" id="recapitulation-content" contenteditable="true" onkeyup="updateCursorPosition('recapitulation-content')" onclick="updateCursorPosition('recapitulation-content')">- Surface d'un rectangle: S = L × l<br>- Volume d'un cube: V = a³<br>- Volume d'un cylindre: V = π × r² × h<br>- Il est important de bien identifier la forme géométrique avant d'appliquer la formule appropriée.</div>
                        <div class="cursor-position" id="recapitulation-cursor-position">Position du curseur: 0</div>
                    </div>
                    <textarea id="recapitulation" name="recapitulation" style="display:none;">- Surface d'un rectangle: S = L × l
- Volume d'un cube: V = a³
- Volume d'un cylindre: V = π × r² × h
- Il est important de bien identifier la forme géométrique avant d'appliquer la formule appropriée.</textarea>
                </div>
            </div>
            
            <div class="form-group">
                <label for="evaluation">Notes d'évaluation:</label>
                <div class="editor-toggle">
                    <button class="editor-toggle-btn" data-target="evaluation">Basculer Éditeur</button>
                </div>
                <div class="rich-text-editor" id="evaluation-editor">
                    <div class="toolbar">
                        <button type="button" data-command="bold"><i class="fas fa-bold"></i></button>
                        <button type="button" data-command="italic"><i class="fas fa-italic"></i></button>
                        <button type="button" data-command="underline"><i class="fas fa-underline"></i></button>
                        <span class="divider"></span>
                        <div class="color-picker">
                            <button type="button" class="color-button" data-command="foreColor"></button>
                            <div class="color-palette" id="evaluation-color-palette"></div>
                        </div>
                        <button type="button" data-command="insertImage"><i class="fas fa-image"></i></button>
                        <button type="button" data-command="insertAudio"><i class="fas fa-volume-up"></i></button>
                        <button type="button" data-command="insertVideo"><i class="fas fa-video"></i></button>
                        <button type="button" onclick="openLatexModal('evaluation-content')"><i class="fas fa-square-root-alt"></i> Formule</button>
                    </div>
                    <div class="editor-content" id="evaluation-content" contenteditable="true" onkeyup="updateCursorPosition('evaluation-content')" onclick="updateCursorPosition('evaluation-content')"></div>
                    <div class="cursor-position" id="evaluation-cursor-position">Position du curseur: 0</div>
                </div>
                <textarea id="evaluation" name="evaluation" style="display:none;"></textarea>
            </div>
            
            <div class="form-group">
                <label for="media3">Importer image, audio ou vidéo:</label>
                <input type="file" id="media3" name="media3" accept="image/*,video/*,audio/*" onchange="previewMedia(this, 'mediaPreview3')">
                <div class="media-preview" id="mediaPreview3"></div>
            </div>
        </div>
        
        <div class="form-group">
            <button class="btn btn-success" onclick="saveForm()"><i class="fas fa-save"></i> Sauvegarder</button>
            <button class="btn" onclick="exportJSON()"><i class="fas fa-file-export"></i> Exporter JSON</button>
            <button class="btn btn-warning" onclick="importJSON()"><i class="fas fa-file-import"></i> Importer JSON</button>
            <button class="btn btn-danger" onclick="clearForm()"><i class="fas fa-trash"></i> Effacer tout</button>
        </div>

        <!-- Section des fiches sauvegardées -->
        <div class="saved-lessons">
            <h2>Fiches sauvegardées</h2>
            
            <div class="search-filter">
                <div class="filter-group">
                    <label for="search">Rechercher</label>
                    <input type="text" id="search" placeholder="Rechercher..." oninput="filterLessons()">
                </div>
                <div class="filter-group">
                    <label for="filterModule">Filtrer par matière</label>
                    <select id="filterModule" onchange="filterLessons()">
                        <option value="">Toutes les matières</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterDate">Filtrer par date</label>
                    <input type="date" id="filterDate" onchange="filterLessons()">
                </div>
            </div>
            
            <div class="stats">
                <span id="totalLessons">Total: 0 fiches</span>
                <span id="filteredLessons">Filtrées: 0</span>
            </div>
            
            <div class="lesson-list" id="lessonList">